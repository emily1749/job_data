import React from 'react';
import { Loading } from './Loading';
import { shallow } from 'enzyme';
import renderer from 'react-test-renderer';
import { Provider } from 'react-redux';
import configureStore from 'redux-mock-store';

import { mount } from 'enzyme';
import sinon from 'sinon';
import thunk from 'redux-thunk';
import Location from './Location';
import moxios from 'moxios';

const initialState = {
  jobData: {
    jobDataCopy: [],
    loading: false,
    error: false,
    locationSubmitted: false,
    message: 'Please enter location',
  },
};

const middlewares = [thunk];
const mockStore = configureStore(middlewares);
const store = mockStore(initialState);

describe('App Component', () => {
  let props;

  beforeEach(() => {
    props = {
      jobData: {
        jobDataCopy: [],
        loading: false,
        error: false,
        locationSubmitted: false,
        message: 'Please enter location',
      },
    };
  });

  it('renders correctly', () => {
    const tree = renderer.create(
      // <Provider store={store}>
      <Loading {...props} />
      // </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });

  it('renders an error message when a network error occurs', () => {
    props.jobData.error = true;
    props.jobData.loading = true;
    const tree = renderer.create(
      // <Provider store={store}>
      <Loading {...props} />
      // </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });

  it('renders a loading message when loading is true', () => {
    props.jobData.error = false;

    props.jobData.loading = true;

    const tree = renderer.create(
      // <Provider store={store}>
      <Loading {...props} />
      // </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });
});

/////

import React from 'react';
import Loading from './Loading';
import { shallow } from 'enzyme';
import renderer from 'react-test-renderer';
import { Provider } from 'react-redux';
import configureStore from 'redux-mock-store';

import { mount } from 'enzyme';
import sinon from 'sinon';
import thunk from 'redux-thunk';
import Location from './Location';
import moxios from 'moxios';

const initialState = {
  jobData: {
    jobDataCopy: [],
    loading: false,
    error: false,
    locationSubmitted: false,
    message: 'Please enter location',
  },
};

const middlewares = [thunk];
const mockStore = configureStore(middlewares);
const store = mockStore(initialState);

describe('App Component', () => {
  let props;

  beforeEach(() => {
    props = {
      jobData: {
        jobDataCopy: [],
        loading: false,
        error: false,
        locationSubmitted: false,
        message: 'Please enter location',
      },
    };
  });

  it('renders correctly', () => {
    const tree = renderer.create(
      <Provider store={store}>
        <Loading {...props} />
      </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });

  it('renders an error message when a network error occurs', () => {
    initialState.jobData.error = true;
    const tree = renderer.create(
      <Provider store={store}>
        <Loading {...props} />
      </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });

  it('renders a loading message when loading is true', () => {
    initialState.jobData.error = false;

    initialState.jobData.loading = true;

    const tree = renderer.create(
      <Provider store={store}>
        <Loading {...props} />
      </Provider>
    );
    expect(tree.toJSON()).toMatchSnapshot();
  });
});


// import React from 'react';
// import { shallow } from 'enzyme';
// import { mount } from 'enzyme';
// // import sinon from 'sinon'
// import thunk from 'redux-thunk';
// import Loading from './Loading';

// // import ConnectedUserInput, { UserInput } from '../src/components/UserInput'
// import * as actionCreators from '../actions';
// import { Provider } from 'react-redux';
// import configureStore from 'redux-mock-store';

// const middlewares = [thunk];
// const mockStore = configureStore(middlewares);
// const initialState = {
//   jobData: {
//     jobDataCopy: [],
//     loading: false,
//     error: false,
//     locationSubmitted: false,
//     message: 'Please enter location',
//   },
// };
// const store = mockStore(initialState);

// const wrapper = mount(
//   <Provider store={store}>
//     <Loading />
//   </Provider>
// );

// console.log(wrapper.debug());

// const testTechInputInAllTec hs = 'css';

// test('has access to "Loading" state', () => {
//   wrapper.setProps();
//   // expect(onSortProp).toBe(onSort);
// });

// describe('(Component) UserInput', () => {
//   it('renders...', () => {
//     expect(wrapper).to.have.length(1);
//   });

//   it('should have message if loading is false', () => {
//     moxios.wait(() => {
//       const request = moxios.requests.mostRecent();
//       request.respondWith({
//         status: 200,
//         response: 'testResponse',
//       });
//     });

//     const res = store.dispatch(actionCreators.fetchJobData('city', 'state'));
//     expect(store.getState().jobData.locationSubmitted).equals(true);
//     // .then(() => {
//     //   const newState = store.getState();
//     //   // expect(newState.secretWord).toBe('test');
//     // });
//   });

//   it('should not have message display if loading is true', () => {});
// });




++++++++++
// import React from 'react';
// import { Provider } from 'react-redux';
// import configureStore from 'redux-mock-store';
// // import configureStore from 'redux-mock-store';
// // import configureStore from 'redux-mock-store';

// import Loading from './Loading';

// const mockStore = configureStore([]);

// describe('My Connected React-Redux Component', () => {
//   let store;
//   let component;

//   beforeEach(() => {
//     store = mockStore({
//       //   myState: 'sample test',
//       jobData: {
//         jobDataCopy: [],
//         loading: false,
//         error: false,
//         locationSubmitted: false,
//         message: 'Please enter location',
//       },
//     });
//     component = renderer.create(
//       <Provider store={store}>
//         <Loading />
//       </Provider>
//     );
//   });
//   it('should render with given stte from redux store', () => {
//     expect(component.toJSON()).toMatchSnapshot();
//   });
// });
//   it('should dispatch an action on button click', () => {});
// });

// import React from 'react';
// import { shallow } from 'enzyme';

// import Enzyme from 'enzyme';
// import EnzymeAdapter from '@wojtekmaj/enzyme-adapter-react-17';

// Enzyme.configure({
//   adapter: new EnzymeAdapter(),
//   disableLifecycleMethods: true,
// });

// import { storeFactory } from '../test/testUtils';
// import Loading from './Loading';

// const initialState = {
//   jobData: {
//     jobDataCopy: [],
//     loading: false,
//     error: false,
//     locationSubmitted: false,
//     message: 'Please enter location',
//   },
// };
// const setup = (state = initialState) => {
//   const store = storeFactory(state);
//   const wrapper = shallow(<Loading store={store} />)
//     .dive()
//     .dive();
//   return wrapper;
// };

// describe('redux properties', () => {
//   test('has access to `success` state', () => {
//     const jobData = {
//       jobDataCopy: [],
//       loading: true,
//       error: false,
//       locationSubmitted: false,
//       message: 'Please enter location',
//     };
//     const wrapper = setup({ jobData });
//     const successProp = wrapper.instance().props.jobData;
//     // expect(successProp).toBe(success);
//   });
// });

// import React from 'react';
// import { shallow } from 'enzyme';

// import Enzyme from 'enzyme';
// import EnzymeAdapter from '@wojtekmaj/enzyme-adapter-react-17';

// Enzyme.configure({
//   adapter: new EnzymeAdapter(),
//   disableLifecycleMethods: true,
// });

// import { storeFactory } from '../test/testUtils';
// import Loading from './Loading';

// const setup = (
//   state = {
//     jobData: {
//       jobDataCopy: [],
//       loading: false,
//       error: false,
//       locationSubmitted: false,
//       message: 'Please enter location',
//     },
//   }
// ) => {
//   const store = storeFactory(state);
//   const wrapper = shallow(<Loading store={store} />)
//     .dive()
//     .dive();
//   return wrapper;
// };

// describe('redux properties', () => {
//   test('has access to `success` state', () => {
//     const testarr = {
//       jobData: {
//         jobDataCopy: [],
//         // resultArray: [],
//         loading: false,
//         error: false,
//         locationSubmitted: false,
//         message: 'Please enter location',
//       },
//     };
//     const wrapper = setup(testarr);
//     const messageProp = wrapper.instance().props.jobData.message;
//     expect(messageProp).toBe('test message');
//   });
// });

// import React from 'react';
// import { shallow } from 'enzyme';
// import { mount } from 'enzyme';
// import Provider from 'react-redux';

// import Loading from './Loading';
// const message = 'test message';

// const setup = (state = { message }) => {
//   const store = storeFactory(state);
//   const wrapper = shallow(<Loading store={store} />)
//     .dive()
//     // .dive()
//     .dive();
//   console.log(wrapper.debug());
//   return wrapper;
// };
// // const messageText = 'This is the message text';
// // const loading = true;

// // const middlewares = [];
// // const mockStore = configureStore(middlewares);
// const wrapper = mount(
//   <Provider store={store}>
//     <Loading messageText={'test'} loading={false} />
//   </Provider>
// );

// describe('Loading Component', () => {
//   it('renders...', () => {
//     expect(wrapper).toBe.have.length(1);
//   });
//   test('has access to "message" state', () => {
//     const message = 'test message';
//     const wrapper = setup({ message });
//     const messageProp = wrapper.instance().props.message;
//   });
// });
// const initialState = {
//   loading: false,
//   message: 'This is the message text',
// };
// const storeFactory = initialState => {
//   const createStoreWithMiddleware = applyMiddleware(...middlewares)(
//     createStore
//   );
//   return createStoreWithMiddleware(rootReducer, initialState);
// };
// const store = storeFactory(initialState);
// export const findByTestAttr = (wrapper, val) => {
//   return wrapper.find(`[data-test="${val}"]`);
// };

// import { storeFactory } from '../test/testUtils';
// import Enzyme from 'enzyme';
// import EnzymeAdapter from '@wojtekmaj/enzyme-adapter-react-17';
